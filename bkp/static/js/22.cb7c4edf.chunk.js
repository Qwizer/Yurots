(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{160:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return c}),a.d(t,"d",function(){return d});var o=a(31),r=a(13),n=a(14),s=a.n(n),l=function(e,t,a){return function(n){s.a.post(r.f,{user_id:e,token:t,restaurant_id:a}).then(function(e){var t=e.data;return n({type:o.b,payload:t})}).catch(function(e){console.log(e)})}},i=function(e,t,a,n,l,i,c,d){return function(g){s.a.post(r.I,{token:t,user_id:e,latitude:a,longitude:n,address:l,house:i,tag:c,get_only_default_address:d}).then(function(e){var t=e.data;return g({type:o.c,payload:t})}).catch(function(e){console.log(e)})}},c=function(e,t,a){return function(n){s.a.post(r.d,{token:a,user_id:e,address_id:t}).then(function(e){var t=e.data;return n({type:o.a,payload:t})}).catch(function(e){console.log(e)})}},d=function(e,t,a){return function(n){s.a.post(r.M,{token:a,user_id:e,address_id:t}).then(function(e){var t=e.data;return n({type:o.d,payload:t})}).catch(function(e){console.log(e)})}}},219:function(e){e.exports=[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]}]},243:function(e,t,a){"use strict";a.r(t);var o=a(63),r=a(3),n=a(4),s=a(6),l=a(5),i=a(7),c=a(0),d=a.n(c),g=a(24),u=a(38),m=a(206),h=a(219),p=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={initialPosition:{lat:37.77,lng:-122.42},zoom:15},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(null!==localStorage.getItem("geoLocation")){var t=JSON.parse(localStorage.getItem("geoLocation")).geometry.location;this.setState({initialPosition:{lat:t.lat,lng:t.lng}})}setTimeout(function(){e.setState({zoom:18})},1e3)}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(m.Map,{google:this.props.google,style:{width:"100%",height:"55vh"},initialCenter:{lat:JSON.parse(localStorage.getItem("geoLocation")).geometry.location.lat,lng:JSON.parse(localStorage.getItem("geoLocation")).geometry.location.lng},onDragend:function(t,a,o){return e.props.onMarkerDragEnd(a)},zoom:this.state.zoom,styles:h,zoomControl:!1,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,fullscreenControl:!1,onReady:function(t,a){e.props.reverseLookup(e.state.initialPosition.lat,e.state.initialPosition.lng),localStorage.setItem("userLat",a.center.lat()),localStorage.setItem("userLng",a.center.lng())},onDragstart:function(){e.props.handleDragging(!0)}}),d.a.createElement("img",{src:"/assets/img/various/dragable-marker.png",alt:"Marker",className:"center-marker"}))}}]),t}(c.Component),f=Object(m.GoogleApiWrapper)({apiKey:localStorage.getItem("googleApiKey"),LoadingContainer:function(){return d.a.createElement(g.a,{height:400,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},d.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:window.innerWidth,height:"400"}))}})(p),y=a(22),v=a.n(y),E=a(12),b=a(160),S=a(245),w=a(25),x=a(13),I=a(14),k=a.n(I);a.d(t,"GeoLocationPage",function(){return N});var N=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={location:"",dragging:!0,house:"",tag:"",error:!1,loading:!1},a.handleAddressInput=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(o.a)({},r,n))},a.reverseLookup=function(e,t){k.a.post(x.g,{lat:e,lng:t}).then(function(e){console.log(e),a.setState({location:e.data,dragging:!1})}).catch(function(e){console.warn(e.response.data)})},a.onMarkerDragEnd=function(e){console.log(e),console.log({lat:e.center.lat(),lng:e.center.lng()}),localStorage.setItem("userLat",e.center.lat()),localStorage.setItem("userLng",e.center.lng()),a.reverseLookup(e.center.lat(),e.center.lng())},a.handleDragging=function(){a.setState({dragging:!0})},a.handleSaveNewAddress=function(){var e=a.props.user;if(e.success)a.setState({loading:!0}),a.props.saveAddress(e.data.id,e.data.auth_token,localStorage.getItem("userLat"),localStorage.getItem("userLng"),a.state.location,a.state.house,a.state.tag,"get_only_default_address");else{var t={lat:localStorage.getItem("userLat"),lng:localStorage.getItem("userLng"),address:a.state.location,house:a.state.house,tag:a.state.tag};localStorage.setItem("userSetAddress",JSON.stringify(t)),setTimeout(function(){a.context.router.history.push("/restaurants")},250)}},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(console.log(e.addresses),this.props.address!==e.addresses){console.log("Reached here");var a={lat:e.addresses.latitude,lng:e.addresses.longitude,address:e.addresses.address,house:e.addresses.house,tag:e.addresses.tag};localStorage.setItem("userSetAddress",JSON.stringify(a)),setTimeout(function(){t.setState({loading:!1}),t.context.router.history.push("/restaurants")},250)}}},{key:"render",value:function(){return window.innerWidth>768?d.a.createElement(S.a,{to:"/"}):null===localStorage.getItem("storeColor")?d.a.createElement(S.a,{to:"/"}):d.a.createElement("div",null,d.a.createElement(w.a,{seotitle:localStorage.getItem("seoMetaTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),this.state.loading&&d.a.createElement("div",{className:"height-100 overlay-loading"},d.a.createElement("div",null,d.a.createElement("img",{src:"/assets/img/loading-food.gif",alt:localStorage.getItem("pleaseWaitText")}))),d.a.createElement(f,{reverseLookup:this.reverseLookup,onMarkerDragEnd:this.onMarkerDragEnd,handleDragging:this.handleDragging}),d.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative",borderRadius:"0 50px 50px 0",boxShadow:"0 2px 8px 1px #E0E0E0"},onClick:this.context.router.history.goBack},d.a.createElement("i",{className:"si si-arrow-left"}),d.a.createElement(v.a,{duration:"500"})),d.a.createElement("div",{className:"confirm-gps-location"},this.state.dragging?d.a.createElement(g.a,{height:345,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},d.a.createElement("rect",{x:"20",y:"15",rx:"0",ry:"0",width:"110",height:"16"}),d.a.createElement("rect",{x:"20",y:"45",rx:"0",ry:"0",width:"280",height:"20"}),d.a.createElement("rect",{x:"315",y:"45",rx:"0",ry:"0",width:"70",height:"20"}),d.a.createElement("rect",{x:"20",y:"100",rx:"0",ry:"0",width:"110",height:"16"}),d.a.createElement("rect",{x:"20",y:"130",rx:"0",ry:"0",width:"280",height:"20"}),d.a.createElement("rect",{x:"20",y:"180",rx:"0",ry:"0",width:"110",height:"16"}),d.a.createElement("rect",{x:"20",y:"210",rx:"0",ry:"0",width:"280",height:"20"}),d.a.createElement("rect",{x:"0",y:"280",rx:"0",ry:"0",width:window.innerWidth,height:"60"})):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"p-15"},d.a.createElement("p",{className:"mb-0 font-w600 text-muted"},localStorage.getItem("yourLocationText")),d.a.createElement("div",{className:"d-flex align-items-baseline"},d.a.createElement("p",{className:"truncate-text mb-0",style:{minWidth:"84%"}},this.state.location),d.a.createElement(u.a,{to:"/search-location",delay:400,className:"change-address-text m-0 p-5 pull-right",style:{color:localStorage.getItem("storeColor"),position:"relative"}},localStorage.getItem("cartChangeLocation"),d.a.createElement(v.a,{duration:400}))),d.a.createElement("hr",null),d.a.createElement("div",{className:"form-group m-0"},d.a.createElement("label",{className:"col-12 edit-address-input-label p-0"},localStorage.getItem("editAddressAddress")),d.a.createElement("div",{className:"col-md-9 p-0"},d.a.createElement("input",{type:"text",name:"house",onChange:this.handleAddressInput,className:"form-control edit-address-input mb-2",value:this.state.house})),d.a.createElement("label",{className:"col-12 edit-address-input-label p-0"},localStorage.getItem("editAddressTag")),d.a.createElement("div",{className:"col-md-9  p-0"},d.a.createElement("input",{type:"text",name:"tag",onChange:this.handleAddressInput,className:"form-control edit-address-input edit-address-tag mb-2",placeholder:localStorage.getItem("addressTagPlaceholder"),value:this.state.tag})))),d.a.createElement("button",{type:"button",className:"btn-save-address",onClick:this.handleSaveNewAddress,style:{backgroundColor:localStorage.getItem("storeColor"),position:"fixed",bottom:"0"}},localStorage.getItem("buttonSaveAddress"),d.a.createElement(v.a,{duration:200})))))}}]),t}(c.Component);N.contextTypes={router:function(){return null}};t.default=Object(E.b)(function(e){return{user:e.user.user,addresses:e.addresses.addresses}},{saveAddress:b.c})(N)}}]);