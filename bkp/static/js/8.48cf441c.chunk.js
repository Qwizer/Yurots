(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatLng=t.geocodeByPlaceId=t.geocodeByAddress=void 0;var o,a=n(178),i=(o=a)&&o.__esModule?o:{default:o},l=n(184);t.geocodeByAddress=l.geocodeByAddress,t.geocodeByPlaceId=l.geocodeByPlaceId,t.getLatLng=l.getLatLng,t.default=i.default},178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(0),l=g(i),s=g(n(1)),r=g(n(179)),c=g(n(180)),u=n(181);function g(e){return e&&e.__esModule?e:{default:e}}n(182);var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchSuggestions=(0,c.default)(function(e){var t=n.props.autocompletionRequest;n.setState({loading:!0}),n.placesService.getPlacePredictions(o({},(0,r.default)(t),{input:e}),n.fetchSuggestionsCallback)},n.props.debounce),n.state={activeSuggestion:null,loading:!1,placesServiceStatus:null,suggestions:[],value:e.initialValue},n.changeActiveSuggestion=n.changeActiveSuggestion.bind(n),n.changeValue=n.changeValue.bind(n),n.clearSuggestions=n.clearSuggestions.bind(n),n.fetchSuggestionsCallback=n.fetchSuggestionsCallback.bind(n),n.handleClick=n.handleClick.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.initalizeService=n.initializeService.bind(n),n.onSuggestionSelect=n.onSuggestionSelect.bind(n),n.renderInput=n.renderInput.bind(n),n.renderSuggestions=n.renderSuggestions.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"componentDidMount",value:function(){this.initalizeService(),document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"componentWillReceiveProps",value:function(e){e.initialValue&&this.setState({value:e.initialValue})}},{key:"handleClick",value:function(e){e.target.id.includes("google-places-autocomplete")||this.clearSuggestions()}},{key:"changeValue",value:function(e){this.setState({value:e}),e.length>0?this.fetchSuggestions(e):this.setState({suggestions:[]})}},{key:"initializeService",value:function(){var e=this;return window.google?window.google.maps?window.google.maps.places?(this.placesService=new window.google.maps.places.AutocompleteService,void this.setState({placesServiceStatus:window.google.maps.places.PlacesServiceStatus.OK})):(console.error("[react-google-places-autocomplete]: Google maps places script not loaded"),void setTimeout(function(){e.initializeService()},1e3)):(console.error("[react-google-places-autocomplete]: Google maps script not loaded"),void setTimeout(function(){e.initalizeService()},1e3)):(console.error("[react-google-places-autocomplete]: Google script not loaded"),void setTimeout(function(){e.initalizeService()},1e3))}},{key:"renderInput",value:function(){var e=this,t=this.state.value,n=this.props,o=n.inputClassName,a=n.inputStyle,i=n.placeholder,s=n.renderInput,r=n.required,c=n.disabled;return s?s({autoComplete:"off",id:"google-places-autocomplete-input",value:t,onChange:function(t){var n=t.target;return e.changeValue(n.value)},onKeyDown:this.handleKeyDown,type:"text",placeholder:i,required:r,disabled:c}):l.default.createElement("input",{autoComplete:"off",className:o||"google-places-autocomplete__input",id:"google-places-autocomplete-input",onChange:function(t){var n=t.target;return e.changeValue(n.value)},onKeyDown:this.handleKeyDown,placeholder:i,style:a,type:"text",value:t,required:r,disabled:c})}},{key:"renderSuggestions",value:function(){var e=this,t=this.state,n=t.activeSuggestion,o=t.suggestions,a=this.props,i=a.renderSuggestions,s=a.suggestionsClassNames,r=a.suggestionsStyles;return 0===o.length?null:i?i(n,o,this.onSuggestionSelect):l.default.createElement("div",{id:"google-places-suggestions-container",className:s.container||"google-places-autocomplete__suggestions-container",style:r.container},o.map(function(t,o){return l.default.createElement("div",{id:"google-places-autocomplete-suggestion--"+o,key:t.id,className:(s.suggestion||"google-places-autocomplete__suggestion")+" "+(n===o?s.suggestionActive||"google-places-autocomplete__suggestion--active":""),style:r.suggestion,onClick:function(n){return e.onSuggestionSelect(t,n)},role:"presentation"},t.description)}))}},{key:"renderLoader",value:function(){var e=this.props.loader;return e||l.default.createElement("div",{className:"google-places-autocomplete__suggestions-container"},l.default.createElement("div",{className:"google-places-autcomplete__suggestions"},"Loading..."))}},{key:"onSuggestionSelect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&t.stopPropagation();var n=this.props.onSelect;this.setState({activeSuggestion:null,suggestions:[],value:e.description}),n(e)}},{key:"fetchSuggestionsCallback",value:function(e,t){this.state.placesServiceStatus;this.setState({loading:!1,suggestions:e||[]})}},{key:"handleKeyDown",value:function(e){var t=this.state,n=t.activeSuggestion,o=t.suggestions;switch(e.key){case"Enter":e.preventDefault(),null!==n&&this.onSuggestionSelect(o[n]);break;case"ArrowDown":this.changeActiveSuggestion(1);break;case"ArrowUp":this.changeActiveSuggestion(-1);break;case"Escape":this.clearSuggestions()}}},{key:"clearSuggestions",value:function(){this.setState({activeSuggestion:null,suggestions:[]})}},{key:"changeActiveSuggestion",value:function(e){if(0!==this.state.suggestions.length)switch(e){case 1:this.setState(function(e){var t=e.activeSuggestion,n=e.suggestions;return null===t||t===n.length-1?{activeSuggestion:0}:{activeSuggestion:t+1}});break;case-1:this.setState(function(e){var t=e.activeSuggestion,n=e.suggestions;return t?{activeSuggestion:t-1}:{activeSuggestion:n.length-1}})}}},{key:"render",value:function(){var e=this.state.loading;return l.default.createElement("div",{className:"google-places-autocomplete"},this.renderInput(),e?this.renderLoader():this.renderSuggestions())}}]),t}();d.propTypes={autocompletionRequest:u.autocompletionRequestType,debounce:s.default.number,initialValue:s.default.string,inputClassName:s.default.string,inputStyle:s.default.object,loader:s.default.node,onSelect:s.default.func,placeholder:s.default.string,renderInput:s.default.func,renderSuggestions:s.default.func,suggestionsClassNames:u.suggestionClassNamesType,suggestionsStyles:u.suggestionStylesType,required:s.default.bool,disabled:s.default.bool},d.defaultProps={autocompletionRequest:{},debounce:300,initialValue:"",inputClassName:"",inputStyle:{},loader:null,onSelect:function(){},placeholder:"Address",renderInput:void 0,renderSuggestions:void 0,suggestionsClassNames:{container:"",suggestion:"",suggestionActive:""},suggestionsStyles:{container:{},suggestion:{}},required:!1,disabled:!1},t.default=d},179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(e){var t=o({},e);return e.bounds&&(t.bounds=new(Function.prototype.bind.apply(google.maps.LatLngBounds,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.bounds))))),e.location&&(t.location=new google.maps.LatLng(e.location)),t}},180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n=void 0,o=void 0;return function(){var a=this,i=arguments;return clearTimeout(n),!(n=setTimeout(function(){n=null,o=e.apply(a,i)},t))&&(o=e.apply(a,i)),o}}},181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suggestionStylesType=t.suggestionClassNamesType=t.autocompletionRequestType=void 0;var o,a=n(1),i=(o=a)&&o.__esModule?o:{default:o};var l=i.default.shape({country:i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)])}),s=i.default.shape({lat:i.default.number,lng:i.default.number});t.autocompletionRequestType=i.default.shape({bounds:function(e,t,n){var o=e[t];return o?Array.isArray(o)&&2===o.length&&o.every(function(e){return 2===Object.keys(e).length&&e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")&&Number(e.lat)&&Number(e.lng)})?null:new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Validation failed."):null},componentRestrictions:l,location:s,offset:i.default.number,radius:i.default.number,types:i.default.arrayOf(i.default.string)}),t.suggestionClassNamesType=i.default.shape({container:i.default.string,suggestion:i.default.string,suggestionActive:i.default.string}),t.suggestionStylesType=i.default.shape({container:i.default.object,suggestion:i.default.object})},182:function(e,t,n){},184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.geocodeByAddress=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,a){t.geocode({address:e},function(e,t){return t!==n?a(t):o(e)})})},t.getLatLng=function(e){return new Promise(function(t,n){try{return t({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}catch(o){return n(o)}})},t.geocodeByPlaceId=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,a){t.geocode({placeId:e},function(e,t){return t!==n?a(t):o(e)})})}},233:function(e,t,n){"use strict";n.r(t);var o=n(3),a=n(4),i=n(6),l=n(5),s=n(7),r=n(0),c=n.n(r),u=n(55),g=n.n(u),d=n(171),p=n.n(d),f=n(26),m=n(25),h=n(18),v=n.n(h),y=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.locations,o=e.handleGeoLocationClick;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"p-15 mt-15"},t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"text-muted h4"},localStorage.getItem("searchPopularPlaces")),c.a.createElement(m.a,{height:160,width:400,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},c.a.createElement("rect",{x:"0",y:"0",rx:"15",ry:"15",width:"125",height:"30"}),c.a.createElement("rect",{x:"135",y:"0",rx:"15",ry:"15",width:"100",height:"30"}),c.a.createElement("rect",{x:"245",y:"0",rx:"15",ry:"15",width:"110",height:"30"}),c.a.createElement("rect",{x:"0",y:"40",rx:"15",ry:"15",width:"85",height:"30"}),c.a.createElement("rect",{x:"95",y:"40",rx:"15",ry:"15",width:"125",height:"30"}))),!t&&c.a.createElement("h1",{className:"text-muted h4"},localStorage.getItem("searchPopularPlaces")),n.map(function(e,t){return c.a.createElement(g.a,{top:!0,delay:50*t,key:e.id},c.a.createElement("button",{type:"button",className:"btn btn-rounded btn-alt-secondary btn-md mb-15 mr-15",style:{position:"relative"},onClick:function(){var t=[{formatted_address:e.name,geometry:{location:{lat:e.latitude,lng:e.longitude}}}];o(t)}},c.a.createElement(v.a,{duration:"500"}),e.name))})))}}]),t}(r.Component),S=n(245),b=n(13),w=n(85),_=n(14),k=n(11),E=n.n(k),O=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={google_script_loaded:!1,loading_popular_location:!0},n.handleGeoLocationClick=function(e){new Promise(function(t){localStorage.setItem("geoLocation",JSON.stringify(e[0])),t("GeoLocation Saved")}).then(function(){n.context.router.history.push("/my-location")})},n.getMyLocation=function(){var e=navigator&&navigator.geolocation;e&&e.getCurrentPosition(function(e){n.reverseLookup(e.coords.latitude,e.coords.longitude)},function(e){alert(localStorage.getItem("gpsAccessNotGrantedMsg"))})},n.reverseLookup=function(e,t){E.a.post(_.j,{lat:e,lng:t}).then(function(o){console.log(o);var a=[{formatted_address:o.data,geometry:{location:{lat:e,lng:t}}}];n.handleGeoLocationClick(a)}).catch(function(e){console.warn(e.response.data)})},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.getPopularLocations(),this.searchInput&&this.searchInput.focus(),!document.getElementById("googleMaps")){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key="+localStorage.getItem("googleApiKey")+"&libraries=places",t.id="googleMaps",document.body.appendChild(t),t.onload=function(){e.setState({google_script_loaded:!0})}}}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("googleMaps");e&&e.parentNode.removeChild(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.popular_locations!==e.popular_locations&&this.setState({loading_popular_location:!1})}},{key:"render",value:function(){var e=this;return window.innerWidth>768?c.a.createElement(S.a,{to:"/"}):null===localStorage.getItem("storeColor")?c.a.createElement(S.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{seotitle:localStorage.getItem("seoMetaTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),c.a.createElement("div",{className:"col-12 p-0 pt-0"},this.state.google_script_loaded&&c.a.createElement(p.a,{loader:c.a.createElement("img",{src:"/assets/img/various/spinner.svg",className:"location-loading-spinner",alt:"loading"}),renderInput:function(t){return c.a.createElement("div",{className:"input-location-icon-field"},c.a.createElement("i",{className:"si si-magnifier"}),c.a.createElement("input",Object.assign({},t,{className:"form-control search-input search-box",placeholder:localStorage.getItem("searchAreaPlaceholder"),ref:function(t){e.searchInput=t}})))},renderSuggestions:function(t,n,o){return c.a.createElement("div",{className:"location-suggestions-container"},n.map(function(t,n){return c.a.createElement(g.a,{top:!0,delay:50*n,key:t.id},c.a.createElement("div",{className:"location-suggestion",onClick:function(n){o(t,n),Object(d.geocodeByPlaceId)(t.place_id).then(function(t){return e.handleGeoLocationClick(t)}).catch(function(e){return console.error(e)})}},c.a.createElement("span",{className:"location-main-name"},t.structured_formatting.main_text),c.a.createElement("br",null),c.a.createElement("span",{className:"location-secondary-name"},t.structured_formatting.secondary_text)))}))}}),c.a.createElement("button",{className:"btn btn-rounded btn-gps btn-md ml-15 mt-4 pl-0 py-15",style:{color:localStorage.getItem("storeColor")},onClick:this.getMyLocation},c.a.createElement("i",{className:"si si-pointer"})," ",localStorage.getItem("useCurrentLocationText"))),c.a.createElement(y,{loading:this.state.loading_popular_location,handleGeoLocationClick:this.handleGeoLocationClick,locations:this.props.popular_locations}))}}]),t}(r.Component);O.contextTypes={router:function(){return null}};t.default=Object(b.b)(function(e){return{popular_locations:e.popular_locations.popular_locations}},{getPopularLocations:function(){return function(e){E.a.post(_.t).then(function(t){var n=t.data;return e({type:w.a,payload:n})}).catch(function(e){console.log(e)})}}})(O)}}]);